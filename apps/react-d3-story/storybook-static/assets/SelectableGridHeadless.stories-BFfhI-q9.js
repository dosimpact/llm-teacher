import{j as a}from"./jsx-runtime-D_zvdyIk.js";import{r as l,R as S}from"./index-B7o9TaAI.js";import"./index-BM9YtLjs.js";const v=({rowData:e,defaultPageSize:t=10,onSelectionChange:n})=>{const[d,s]=l.useState(1),[o,p]=l.useState(null),y=l.useMemo(()=>Math.ceil(e.length/t),[e.length,t]),m=l.useMemo(()=>{const r=(d-1)*t,c=r+t;return e.slice(r,c)},[d,t,e]),i=l.useMemo(()=>e.reduce((r,c)=>(Object.entries(c).forEach(([f,h])=>{typeof h=="number"&&f!=="id"&&(r[f]=(r[f]||0)+h)}),r),{}),[e]);l.useEffect(()=>{const r=o?e.find(c=>c.id===o):null;n==null||n(r||null)},[o,e,n]);const u=l.useCallback(r=>r===o,[o]),R=l.useCallback(r=>{p(o===r?null:r)},[o]);return{currentPageData:m,selectedRowId:o,totalPages:y,currentPage:d,setCurrentPage:s,setSelectedRowId:p,totalSum:i,isSelected:u,toggleRowSelection:R}},N=({rowData:e,columnDefs:t,defaultPageSize:n,onSelectionChange:d,renderRow:s,renderHeader:o,renderPagination:p})=>{const{currentPageData:y,totalPages:m,currentPage:i,setCurrentPage:u,toggleRowSelection:R,totalSum:r,isSelected:c}=v({rowData:e,defaultPageSize:n,onSelectionChange:d}),f=l.useMemo(()=>({id:"total",company:"합계",...r}),[r]),h=a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",padding:"16px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:[a.jsx("button",{style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #e2e8f0",backgroundColor:"white",color:"#1e293b",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>u(Math.max(1,i-1)),disabled:i===1,children:"이전"}),a.jsxs("span",{style:{display:"flex",alignItems:"center",color:"#64748b"},children:[i," / ",m," 페이지"]}),a.jsx("button",{style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #e2e8f0",backgroundColor:"white",color:"#1e293b",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>u(Math.min(m,i+1)),disabled:i===m,children:"다음"})]});return a.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",backgroundColor:"white"},children:[o({columns:t}),a.jsxs("div",{style:{maxHeight:"500px",overflowY:"auto"},children:[y.map(g=>a.jsx(S.Fragment,{children:s({row:g,isSelected:c(g.id),onSelect:()=>R(g.id),isTotal:!1})},g.id)),s({row:f,isSelected:!1,onSelect:()=>{},isTotal:!0})]}),p?p({currentPage:i,totalPages:m,onPageChange:u}):h]})};N.__docgenInfo={description:"",methods:[],displayName:"SelectableGridHeadless",props:{rowData:{required:!0,tsType:{name:"Array",elements:[{name:"MonthlyData"}],raw:"MonthlyData[]"},description:""},defaultPageSize:{required:!1,tsType:{name:"number"},description:""},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(selectedRow: MonthlyData | null) => void",signature:{arguments:[{type:{name:"union",raw:"MonthlyData | null",elements:[{name:"MonthlyData"},{name:"null"}]},name:"selectedRow"}],return:{name:"void"}}},description:""},columnDefs:{required:!0,tsType:{name:"Array",elements:[{name:"ColumnDefinition"}],raw:"ColumnDefinition[]"},description:""},renderRow:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: RenderRowProps) => React.ReactNode",signature:{arguments:[{type:{name:"RenderRowProps"},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},renderHeader:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: RenderHeaderProps) => React.ReactNode",signature:{arguments:[{type:{name:"RenderHeaderProps"},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},renderPagination:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: RenderPaginationProps) => React.ReactNode",signature:{arguments:[{type:{name:"RenderPaginationProps"},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""}}};const A={title:"AG Grid Advanced/SelectableGridHeadless",component:N,parameters:{layout:"centered"},decorators:[e=>a.jsx("div",{style:{margin:"1em",minWidth:"1200px"},children:a.jsx(e,{})})]},M=(e,t)=>Array.from({length:t},(n,d)=>({id:`${e}-${d+1}`,company:e,jan:Math.floor(Math.random()*1e3),feb:Math.floor(Math.random()*1e3),mar:Math.floor(Math.random()*1e3),apr:Math.floor(Math.random()*1e3),may:Math.floor(Math.random()*1e3),jun:Math.floor(Math.random()*1e3),jul:Math.floor(Math.random()*1e3),aug:Math.floor(Math.random()*1e3),sep:Math.floor(Math.random()*1e3),oct:Math.floor(Math.random()*1e3),nov:Math.floor(Math.random()*1e3),dec:Math.floor(Math.random()*1e3)})),P=[...M("A 회사",3),...M("B 회사",4)],b=[{field:"company",headerName:"회사"},{field:"jan",headerName:"1월"},{field:"feb",headerName:"2월"},{field:"mar",headerName:"3월"},{field:"apr",headerName:"4월"},{field:"may",headerName:"5월"},{field:"jun",headerName:"6월"},{field:"jul",headerName:"7월"},{field:"aug",headerName:"8월"},{field:"sep",headerName:"9월"},{field:"oct",headerName:"10월"},{field:"nov",headerName:"11월"},{field:"dec",headerName:"12월"}],D=({columns:e})=>a.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${e.length}, 1fr)`,padding:"12px",backgroundColor:"#f8fafc",borderBottom:"1px solid #e2e8f0"},children:e.map(t=>a.jsx("div",{style:{fontWeight:600},children:t.headerName},t.field))}),T=({row:e,isSelected:t,onSelect:n,isTotal:d})=>a.jsx("div",{style:{display:"grid",gridTemplateColumns:`repeat(${b.length}, 1fr)`,padding:"12px",backgroundColor:t?"#e0f2fe":d?"#f8fafc":"white",borderBottom:"1px solid #e2e8f0",cursor:"pointer"},onClick:n,children:b.map(s=>a.jsx("div",{children:typeof e[s.field]=="number"?new Intl.NumberFormat("ko-KR").format(e[s.field]):e[s.field]},s.field))}),k=({currentPage:e,totalPages:t,onPageChange:n})=>a.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",padding:"12px",borderTop:"1px solid #e2e8f0"},children:[a.jsx("button",{onClick:()=>n(e-1),disabled:e===1,children:"이전"}),a.jsxs("span",{children:[e," / ",t]}),a.jsx("button",{onClick:()=>n(e+1),disabled:e===t,children:"다음"})]}),x={args:{rowData:P,columnDefs:b,defaultPageSize:5,renderHeader:D,renderRow:T,renderPagination:k,onSelectionChange:e=>console.log("Selected:",e)}};var j,w,C;x.parameters={...x.parameters,docs:{...(j=x.parameters)==null?void 0:j.docs,source:{originalSource:`{
  args: {
    rowData: sampleData,
    columnDefs,
    defaultPageSize: 5,
    renderHeader: CustomHeader,
    renderRow: CustomRow,
    renderPagination: CustomPagination,
    onSelectionChange: row => console.log("Selected:", row)
  }
}`,...(C=(w=x.parameters)==null?void 0:w.docs)==null?void 0:C.source}}};const G=["Default"];export{x as Default,G as __namedExportsOrder,A as default};

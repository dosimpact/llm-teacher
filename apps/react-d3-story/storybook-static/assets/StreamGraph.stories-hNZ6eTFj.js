import{j as X}from"./jsx-runtime-D_zvdyIk.js";import{r as k}from"./index-B7o9TaAI.js";import{s as _}from"./transform-BIeV-TGt.js";import{n as Y,t as F,s as H,a as J}from"./stack-BuqzYAje.js";import{e as K}from"./line-DIHS9p7a.js";import{a as Q}from"./linear-BvEZjWga.js";import{m as q}from"./min-D1slsF82.js";import{m as A}from"./max-DBeXZoyG.js";import{o as U}from"./ordinal-BIATHBfR.js";import{c as W}from"./category10-D7Iw8EHd.js";import{a as Z,b as j}from"./axis-D3QohQNI.js";import"./index-BM9YtLjs.js";import"./path-CSVzDSO0.js";import"./colors-Cc3OSVma.js";function E(t,r,o){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+o)/6)}function P(t){this._context=t}P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:E(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:E(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function tt(t){return new P(t)}function et(t,r){if(!(!((i=t.length)>0)||!((c=(s=t[r[0]]).length)>0))){for(var o=0,e=1,s,c,i;e<c;++e){for(var n=0,m=0,l=0;n<i;++n){for(var f=t[r[n]],h=f[e][1]||0,w=f[e-1][1]||0,y=(h-w)/2,u=0;u<n;++u){var g=t[r[u]],p=g[e][1]||0,a=g[e-1][1]||0;y+=p-a}m+=h,l+=y*h}s[e-1][1]+=s[e-1][0]=o,m&&(o-=l/m)}s[e-1][1]+=s[e-1][0]=o,Y(t,r)}}const T=k.memo(({data:t,width:r=800,height:o=400,margin:e={top:20,right:30,bottom:30,left:40},colors:s=W})=>{const c=k.useRef(null);return k.useEffect(()=>{if(!c.current||!t.length)return;const i=_(c.current);i.selectAll("*").remove();const n=Object.keys(t[0]).filter(a=>a!=="date"),m=F().domain(K(t,a=>a.date)).range([e.left,r-e.right]),l=Q().domain([q(t,a=>q(n,d=>a[d])),A(t,a=>A(n,d=>a[d]))]).range([o-e.bottom,e.top]),f=U().domain(n).range(s),w=H().offset(et).keys(n)(t),y=J().x(a=>m(a.data.date)).y0(a=>l(a[0])).y1(a=>l(a[1])).curve(tt);i.selectAll("path").data(w).join("path").attr("d",y).attr("fill",a=>f(a.key)).attr("opacity",.8);const u=Z(m);i.append("g").attr("transform",`translate(0,${o-e.bottom})`).call(u);const g=j(l);i.append("g").attr("transform",`translate(${e.left},0)`).call(g);const p=_("body").append("div").style("position","absolute").style("visibility","hidden").style("background-color","white").style("border","1px solid #ddd").style("padding","10px").style("border-radius","5px");return i.selectAll("path").on("mouseover",function(a,d){_(this).attr("opacity",1),p.style("visibility","visible").html(`Category: ${d.key}`)}).on("mousemove",function(a){p.style("top",a.pageY-10+"px").style("left",a.pageX+10+"px")}).on("mouseout",function(){_(this).attr("opacity",.8),p.style("visibility","hidden")}),()=>{p.remove()}},[t,r,o,e,s]),X.jsx("svg",{ref:c,width:r,height:o})});T.displayName="StreamGraph";T.__docgenInfo={description:"",methods:[],displayName:"StreamGraph",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"StreamData"}],raw:"StreamData[]"},description:""},width:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"800",computed:!1}},height:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"400",computed:!1}},margin:{required:!1,tsType:{name:"signature",type:"object",raw:"{ top: number; right: number; bottom: number; left: number }",signature:{properties:[{key:"top",value:{name:"number",required:!0}},{key:"right",value:{name:"number",required:!0}},{key:"bottom",value:{name:"number",required:!0}},{key:"left",value:{name:"number",required:!0}}]}},description:"",defaultValue:{value:"{ top: 20, right: 30, bottom: 30, left: 40 }",computed:!1}},colors:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"d3.schemeCategory10",computed:!0}}}};const yt={title:"D3 Advanced/StreamGraph",component:T,parameters:{layout:"centered"},tags:["autodocs"]},S=t=>{const r=[],o=new Date("2024-01-01");for(let e=0;e<t;e++){const s=new Date(o);s.setDate(o.getDate()+e),r.push({date:s,category1:Math.random()*50+10,category2:Math.random()*40+20,category3:Math.random()*30+15,category4:Math.random()*45+5,category5:Math.random()*35+25})}return r},b={args:{data:S(30)}},x={args:{data:S(30),width:1e3,height:500,margin:{top:30,right:40,bottom:40,left:50},colors:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd"]}},v={args:{data:S(7),width:600,height:300}},D={args:{data:S(90),width:1200,height:600}};var N,$,C;b.parameters={...b.parameters,docs:{...(N=b.parameters)==null?void 0:N.docs,source:{originalSource:`{
  args: {
    data: generateData(30)
  }
}`,...(C=($=b.parameters)==null?void 0:$.docs)==null?void 0:C.source}}};var M,G,V;x.parameters={...x.parameters,docs:{...(M=x.parameters)==null?void 0:M.docs,source:{originalSource:`{
  args: {
    data: generateData(30),
    width: 1000,
    height: 500,
    margin: {
      top: 30,
      right: 40,
      bottom: 40,
      left: 50
    },
    colors: ["#1f77b4", "#ff7f0e", "#2ca02c", "#d62728", "#9467bd"]
  }
}`,...(V=(G=x.parameters)==null?void 0:G.docs)==null?void 0:V.source}}};var L,R,B;v.parameters={...v.parameters,docs:{...(L=v.parameters)==null?void 0:L.docs,source:{originalSource:`{
  args: {
    data: generateData(7),
    width: 600,
    height: 300
  }
}`,...(B=(R=v.parameters)==null?void 0:R.docs)==null?void 0:B.source}}};var O,z,I;D.parameters={...D.parameters,docs:{...(O=D.parameters)==null?void 0:O.docs,source:{originalSource:`{
  args: {
    data: generateData(90),
    width: 1200,
    height: 600
  }
}`,...(I=(z=D.parameters)==null?void 0:z.docs)==null?void 0:I.source}}};const gt=["Default","CustomStyle","SmallDataset","LargeDataset"];export{x as CustomStyle,b as Default,D as LargeDataset,v as SmallDataset,gt as __namedExportsOrder,yt as default};

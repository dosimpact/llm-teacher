import{j as t}from"./jsx-runtime-D_zvdyIk.js";import{r as x,R as N}from"./index-B7o9TaAI.js";import"./index-BM9YtLjs.js";const z=[10,20,50,100],T=({data:e,defaultPageSize:s=10,initialGroupState:h,pageSizeOptions:f=z})=>{const[y,b]=x.useState(h||e.reduce((c,l)=>(c[l.company]=!0,c),{})),[p,j]=x.useState({currentPage:1,pageSize:s,totalItems:0}),n=x.useCallback(c=>{b(l=>({...l,[c]:!l[c]}))},[]),u=x.useCallback(()=>[...new Set(e.map(l=>l.company))].flatMap(l=>{const i=e.filter(a=>a.company===l),S=y[l],M={id:`${l}-header`,company:l,jan:i.reduce((a,o)=>a+o.jan,0),feb:i.reduce((a,o)=>a+o.feb,0),mar:i.reduce((a,o)=>a+o.mar,0),apr:i.reduce((a,o)=>a+o.apr,0),may:i.reduce((a,o)=>a+o.may,0),jun:i.reduce((a,o)=>a+o.jun,0),jul:i.reduce((a,o)=>a+o.jul,0),aug:i.reduce((a,o)=>a+o.aug,0),sep:i.reduce((a,o)=>a+o.sep,0),oct:i.reduce((a,o)=>a+o.oct,0),nov:i.reduce((a,o)=>a+o.nov,0),dec:i.reduce((a,o)=>a+o.dec,0)};return S?[M,...i]:[M]}),[e,y]),m=x.useMemo(()=>u(),[u]),d=x.useMemo(()=>m.length,[m]),g=x.useMemo(()=>Math.ceil(d/p.pageSize),[d,p.pageSize]);x.useCallback(()=>{p.currentPage>g&&j(c=>({...c,currentPage:Math.max(1,g)}))},[g,p.currentPage]);const C=x.useCallback(c=>{j(l=>({...l,currentPage:Math.max(1,Math.min(c,g))}))},[g]),G=x.useCallback(c=>{j(l=>({...l,pageSize:c,currentPage:1}))},[]);return{currentPageData:x.useMemo(()=>{const{currentPage:c,pageSize:l}=p,i=(c-1)*l,S=i+l;return m.slice(i,S)},[m,p]),pagination:{currentPage:p.currentPage,totalPages:g,pageSize:p.pageSize,totalItems:d,setCurrentPage:C,setPageSize:G,pageSizeOptions:f},groupState:y,toggleGroup:n,getGroupedData:u}},D=["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],w=({data:e,defaultPageSize:s,pageSizeOptions:h,initialGroupState:f,renderRow:y,renderHeader:b,renderPagination:p})=>{const{currentPageData:j,pagination:n,groupState:u,toggleGroup:m}=T({data:e,defaultPageSize:s,pageSizeOptions:h,initialGroupState:f}),d=t.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"1rem",padding:"16px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},children:[t.jsx("button",{style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #e2e8f0",backgroundColor:"white",color:"#1e293b",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>n.setCurrentPage(n.currentPage-1),disabled:n.currentPage===1,children:"이전"}),t.jsxs("span",{style:{display:"flex",alignItems:"center",color:"#64748b"},children:[n.currentPage," / ",n.totalPages," 페이지"]}),t.jsx("button",{style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #e2e8f0",backgroundColor:"white",color:"#1e293b",cursor:"pointer",transition:"all 0.2s ease"},onClick:()=>n.setCurrentPage(n.currentPage+1),disabled:n.currentPage===n.totalPages,children:"다음"})]});return t.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",backgroundColor:"white"},children:[b({months:D}),t.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:j.map(g=>{const C=g.id.endsWith("-header");return t.jsx(N.Fragment,{children:y({row:g,isGroupRow:C,isExpanded:C?u[g.company]:!1,onToggleGroup:()=>m(g.company)})},g.id)})}),p?p({currentPage:n.currentPage,totalPages:n.totalPages,pageSize:n.pageSize,totalItems:n.totalItems,pageSizeOptions:n.pageSizeOptions,onPageChange:n.setCurrentPage,onPageSizeChange:n.setPageSize}):d]})};w.__docgenInfo={description:"",methods:[],displayName:"GroupableGridHeadless",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"MonthlyData"}],raw:"MonthlyData[]"},description:""},defaultPageSize:{required:!1,tsType:{name:"number"},description:""},initialGroupState:{required:!1,tsType:{name:"GroupState"},description:""},pageSizeOptions:{required:!1,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""},renderRow:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: RenderRowProps) => React.ReactNode",signature:{arguments:[{type:{name:"RenderRowProps"},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},renderHeader:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: RenderHeaderProps) => React.ReactNode",signature:{arguments:[{type:{name:"RenderHeaderProps"},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},renderPagination:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: RenderPaginationProps) => React.ReactNode",signature:{arguments:[{type:{name:"RenderPaginationProps"},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""}}};const W={title:"AG Grid Advanced/GroupableGridHeadless",component:w,parameters:{layout:"centered"}},v=(e,s)=>Array.from({length:s},(h,f)=>({id:`${e}-${f+1}`,company:e,jan:Math.floor(Math.random()*1e3),feb:Math.floor(Math.random()*1e3),mar:Math.floor(Math.random()*1e3),apr:Math.floor(Math.random()*1e3),may:Math.floor(Math.random()*1e3),jun:Math.floor(Math.random()*1e3),jul:Math.floor(Math.random()*1e3),aug:Math.floor(Math.random()*1e3),sep:Math.floor(Math.random()*1e3),oct:Math.floor(Math.random()*1e3),nov:Math.floor(Math.random()*1e3),dec:Math.floor(Math.random()*1e3)})),L=[...v("A 회사",3),...v("B 회사",4)],r={header:{display:"grid",gridTemplateColumns:"200px repeat(12, 1fr)",padding:"12px 16px",backgroundColor:"#f8fafc",borderBottom:"2px solid #e2e8f0",position:"sticky",top:0,fontWeight:600,color:"#1e293b"},headerCell:{display:"flex",alignItems:"center",justifyContent:"center"},row:{display:"grid",gridTemplateColumns:"200px repeat(12, 1fr)",padding:"12px 16px",borderBottom:"1px solid #e2e8f0",transition:"all 0.2s ease","&:hover":{backgroundColor:"#f1f5f9"}},cell:{display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"16px"},companyCell:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},groupRow:{backgroundColor:"#f8fafc",fontWeight:600},childRow:{backgroundColor:"white"},toggleIcon:{width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid #cbd5e1",borderRadius:"4px",transition:"all 0.2s ease"},pagination:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px",borderTop:"1px solid #e2e8f0",backgroundColor:"#f8fafc"},paginationInfo:{display:"flex",alignItems:"center",gap:"16px"},paginationControls:{display:"flex",alignItems:"center",gap:"8px"},select:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e2e8f0",backgroundColor:"white",cursor:"pointer"},itemCount:{color:"#64748b",fontSize:"0.875rem"},button:{padding:"8px 16px",borderRadius:"6px",border:"1px solid #e2e8f0",backgroundColor:"white",color:"#1e293b",cursor:"pointer",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"#f1f5f9",borderColor:"#cbd5e1"},"&:disabled":{backgroundColor:"#f1f5f9",color:"#94a3b8",cursor:"not-allowed"}},pageNumbers:{display:"flex",gap:"4px"},pageNumber:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #e2e8f0",backgroundColor:"white",color:"#1e293b",cursor:"pointer",transition:"all 0.2s ease","&:hover":{backgroundColor:"#f1f5f9"}},currentPage:{backgroundColor:"#3b82f6",color:"white",borderColor:"#3b82f6","&:hover":{backgroundColor:"#2563eb"}}},H=({months:e})=>t.jsxs("div",{style:r.header,children:[t.jsx("div",{style:r.headerCell,children:"회사"}),e.map(s=>t.jsx("div",{style:r.headerCell,children:s},s))]}),A=({row:e,isGroupRow:s,isExpanded:h,onToggleGroup:f})=>t.jsxs("div",{style:{...r.row,...s?r.groupRow:r.childRow},children:[t.jsxs("div",{style:r.companyCell,onClick:f,children:[s&&t.jsx("span",{style:r.toggleIcon,children:h?"-":"+"}),t.jsx("span",{children:e.company})]}),t.jsx("div",{style:r.cell,children:e.jan.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.feb.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.mar.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.apr.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.may.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.jun.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.jul.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.aug.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.sep.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.oct.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.nov.toLocaleString()}),t.jsx("div",{style:r.cell,children:e.dec.toLocaleString()})]}),O=({currentPage:e,totalPages:s,pageSize:h,totalItems:f,pageSizeOptions:y,onPageChange:b,onPageSizeChange:p})=>{const j=(e-1)*h+1,n=Math.min(e*h,f);return t.jsxs("div",{style:r.pagination,children:[t.jsxs("div",{style:r.paginationInfo,children:[t.jsx("select",{value:h,onChange:u=>p(Number(u.target.value)),style:r.select,children:y.map(u=>t.jsxs("option",{value:u,children:[u,"개씩 보기"]},u))}),t.jsxs("span",{style:r.itemCount,children:["총 ",f,"개 중 ",j,"-",n]})]}),t.jsxs("div",{style:r.paginationControls,children:[t.jsx("button",{style:{...r.button,padding:"8px 12px"},onClick:()=>b(1),disabled:e===1,children:"<<"}),t.jsx("button",{style:r.button,onClick:()=>b(e-1),disabled:e===1,children:"이전"}),t.jsx("div",{style:r.pageNumbers,children:Array.from({length:Math.min(5,s)},(u,m)=>{let d;return s<=5||e<=3?d=m+1:e>=s-2?d=s-4+m:d=e-2+m,t.jsx("button",{style:{...r.pageNumber,...e===d?r.currentPage:{}},onClick:()=>b(d),children:d},d)})}),t.jsx("button",{style:r.button,onClick:()=>b(e+1),disabled:e===s,children:"다음"}),t.jsx("button",{style:{...r.button,padding:"8px 12px"},onClick:()=>b(s),disabled:e===s,children:">>"})]})]})},R={args:{data:L,defaultPageSize:10,pageSizeOptions:[5,10,20,50],renderHeader:H,renderRow:A,renderPagination:O}};var P,k,I;R.parameters={...R.parameters,docs:{...(P=R.parameters)==null?void 0:P.docs,source:{originalSource:`{
  args: {
    data: sampleData,
    defaultPageSize: 10,
    pageSizeOptions: [5, 10, 20, 50],
    renderHeader: CustomHeader,
    renderRow: CustomRow,
    renderPagination: CustomPagination
  }
}`,...(I=(k=R.parameters)==null?void 0:k.docs)==null?void 0:I.source}}};const $=["Default"];export{R as Default,$ as __namedExportsOrder,W as default};
